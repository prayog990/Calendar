<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jai Gurudev Calendar 2026 v3.5</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600;700&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-red: #b71c1c;
            --gold: #d4af37;
            --paper-bg: #fffcf5;
            --grid-border: #d1cfc7;
            --text-black: #1a1a1a;
            --header-bg: #fff8e1;
            --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* --- Dark Mode Variables --- */
        body.dark-mode {
            --paper-bg: #121212;
            --header-bg: #1e1e1e;
            --text-black: #e0e0e0;
            --grid-border: #333;
            --gold: #b8860b;
        }
        body.dark-mode .menu-item { background: #1e1e1e; color: #e0e0e0; border-color: #333; }
        body.dark-mode .weekday { background: #1e1e1e; color: #bbb; }
        body.dark-mode .weekday.sunday { background: #2c1a1a; color: #ff5252; }
        body.dark-mode .footer-section, body.dark-mode .side-panel { background: #121212; }
        body.dark-mode .tithi { color: #aaa; }
        body.dark-mode .day-cell.empty { background-color: #121212; }

        /* --- Animations --- */
        .days-grid { transition: opacity 0.2s ease-out, transform 0.2s ease-out; }
        .fade-out { opacity: 0; transform: scale(0.98); }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-in { animation: slideIn 0.3s forwards; }

        * { box-sizing: border-box; -webkit-print-color-adjust: exact; }

        body {
            font-family: 'Noto Sans Devanagari', sans-serif;
            background-color: #2c3e50;
            margin: 0;
            padding: 5px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            overflow-y: auto;
        }

        .calendar-container {
            width: 100%;
            max-width: 500px; /* ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§î‡§∞ ‡§¨‡•á‡§π‡§§‡§∞ ‡§ö‡•å‡•ú‡§æ‡§à */
            height: 96vh; /* ‡§´‡§ø‡§ï‡•ç‡§∏‡•ç‡§° ‡§π‡§æ‡§á‡§ü ‡§§‡§æ‡§ï‡§ø ‡§´‡•Å‡§ü‡§∞ ‡§® ‡§ï‡§ü‡•á */
            max-height: 850px; /* ‡§¨‡•ú‡•á ‡§ü‡•à‡§¨‡§≤‡•á‡§ü/‡§≤‡•à‡§Ç‡§°‡§∏‡•ç‡§ï‡•á‡§™ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡§ø‡§Æ‡§ø‡§ü */
            background-color: var(--paper-bg);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 4px double var(--gold);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            position: relative;
            margin: 0 auto 10px auto; /* ‡§∏‡•á‡§Ç‡§ü‡§∞ ‡§Ö‡§≤‡§æ‡§á‡§®‡§Æ‡•á‡§Ç‡§ü */
            overflow: hidden;
        }

        /* --- Header Section --- */
        .top-banner {
            background-color: var(--header-bg);
            border-bottom: 2px solid var(--primary-red);
            padding: 8px 10px;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        .menu-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 1.8rem;
            color: var(--primary-red);
            cursor: pointer;
        }

        .om-symbol { font-size: 1rem; color: var(--primary-red); font-weight: bold; letter-spacing: 2px; }
        .guru-title { font-size: 1.8rem; color: var(--primary-red); font-weight: 700; margin: -2px 0; font-family: 'Oswald', sans-serif; }

        /* --- Side Panel --- */
        .side-panel {
            position: fixed; top: 0; right: -280px; width: 280px; height: 100%;
            background: var(--paper-bg); background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            box-shadow: -5px 0 25px rgba(0,0,0,0.3); z-index: 1000;
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); padding: 25px 20px;
            display: flex; flex-direction: column; gap: 15px; border-left: 3px double var(--gold);
        }
        .side-panel.open { right: 0; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; z-index: 999; }

        .panel-header { font-size: 1.6rem; font-weight: 700; color: var(--primary-red); border-bottom: 3px double var(--gold); padding-bottom: 10px; text-align: center; font-family: 'Oswald', sans-serif; }
        .menu-item { display: flex; align-items: center; justify-content: space-between; padding: 15px; background: white; border-radius: 10px; cursor: pointer; font-weight: 700; color: #333; border: 1px solid #eee; box-shadow: 0 2px 5px rgba(0,0,0,0.05); transition: 0.2s; }
        .menu-item:active { transform: scale(0.95); }

        .lang-toggle { display: flex; background: #ddd; border-radius: 20px; overflow: hidden; }
        .lang-btn { padding: 5px 15px; border: none; cursor: pointer; font-weight: bold; font-size: 0.8rem; }
        .lang-btn.active { background: var(--primary-red); color: white; }

        /* --- Grid & Navigation --- */
        .month-header { background: var(--primary-red); color: white; padding: 8px 15px; }
        .month-nav-row { display: flex; justify-content: space-between; align-items: center; }
        .nav-btn { background: rgba(255,255,255,0.2); border: 1px solid white; color: white; cursor: pointer; width: 35px; height: 35px; border-radius: 50%; font-size: 1.2rem; }
        .month-title h2 { margin: 0; font-size: 1.6rem; font-family: 'Oswald', sans-serif; text-align: center; }
        .month-title span { font-size: 0.9rem; color: #ffd54f; display: block; text-align: center; font-weight: bold; }
        .header-sub-details { display: flex; justify-content: space-between; font-size: 0.65rem; margin-top: 5px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 5px; }

        .weekdays { display: grid; grid-template-columns: repeat(7, 1fr); background: #f1f1f1; border-bottom: 1px solid var(--grid-border); }
        .weekday { padding: 5px; text-align: center; font-weight: 700; font-size: 0.75rem; border-right: 1px solid #ddd; }
        .weekday.sunday { color: var(--primary-red); background: #ffebee; }

        .days-grid { display: grid; grid-template-columns: repeat(7, 1fr); flex-grow: 1; }
        .day-cell { 
            border-right: 1px solid var(--grid-border); 
            border-bottom: 1px solid var(--grid-border); 
            padding: 2px; 
            position: relative; 
            display: flex; 
            flex-direction: column; 
            justify-content: space-between; 
            flex: 1 1 0; /* ‡§¨‡§∞‡§æ‡§¨‡§∞ ‡§ú‡§ó‡§π ‡§¨‡§æ‡§Ç‡§ü‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
            min-height: 0; /* ‡§ì‡§µ‡§∞‡§´‡•ç‡§≤‡•ã ‡§∞‡•ã‡§ï‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
        }
        .day-cell.today { background-color: #fff9c4 !important; border: 2px solid var(--primary-red); z-index: 1; }
        .day-cell.empty { background-color: var(--paper-bg); border: none; } /* ‡§ï‡•ç‡§≤‡•Ä‡§® ‡§≤‡•Å‡§ï ‡§ï‡•á ‡§≤‡§ø‡§è */
        .en-date { font-family: 'Oswald', sans-serif; font-size: 1.8rem; font-weight: 700; color: var(--text-black); text-align: center; }
        .sunday .en-date { color: var(--primary-red); }

        .tithi { font-size: 0.6rem; text-align: center; color: #444; font-weight: bold; }
        .festival-text { font-size: 0.55rem; color: #d32f2f; text-align: center; font-weight: bold; background: #ffebee; border-radius: 2px; margin-bottom: 2px; }
        .paksha-mark { position: absolute; top: 2px; right: 4px; font-size: 0.6rem; font-weight: bold; color: #888; }

        /* --- Modal --- */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); align-items: center; justify-content: center; padding: 20px; }
        .modal-content { background: var(--paper-bg); padding: 25px; border: 3px double var(--gold); border-radius: 12px; width: 100%; max-width: 350px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .modal-header { color: var(--primary-red); font-size: 1.3rem; font-weight: 700; margin-bottom: 15px; }
        .modal-body { font-size: 0.9rem; text-align: left; margin-bottom: 20px; }
        .modal-btn { background: var(--primary-red); color: white; border: none; padding: 10px 25px; border-radius: 5px; font-weight: bold; cursor: pointer; }
        
        /* Interactive Detail View Styles */
        .detail-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #d1cfc7; }
        .detail-label { color: #666; font-size: 0.85rem; font-weight: 600; }
        .detail-value { color: var(--text-black); font-size: 0.95rem; font-weight: 700; }
        .detail-fest { color: var(--primary-red); font-size: 1.1rem; font-weight: 700; margin-top: 10px; text-align: center; }
        .day-cell { cursor: pointer; transition: background 0.2s; }
        .day-cell:active { background: #f0f0f0; }

        /* --- Footer --- */
        .footer-section { padding: 8px; display: flex; justify-content: space-between; align-items: center; background: white; border-top: 2px solid var(--gold); }
        .mini-cal { font-size: 0.45rem; width: 75px; }
        .mini-cal table { width: 100%; border-collapse: collapse; }
        .notes-area { flex: 1; margin: 0 8px; border: 1px dashed var(--gold); padding: 5px; border-radius: 4px; }
        .notes-header { font-size: 0.6rem; font-weight: bold; color: var(--primary-red); text-align: center; }
        .note-line { border-bottom: 1px solid #eee; height: 12px; }

    </style>
</head>
<body>

    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
    <div class="side-panel" id="sidePanel">
        <div class="panel-header">Settings / ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏</div>
        <div class="menu-item">
            <span id="lang-label">Language / ‡§≠‡§æ‡§∑‡§æ</span>
            <div class="lang-toggle">
                <button class="lang-btn active" id="btn-hi" onclick="setLanguage('hi')">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
                <button class="lang-btn" id="btn-en" onclick="setLanguage('en')">EN</button>
            </div>
        </div>
        <div class="menu-item" onclick="addBookmark()">
            <span id="install-label">Add to Home Screen</span><span>üì≤</span>
        </div>
        <div class="menu-item" onclick="toggleDarkMode()">
            <span id="dark-label">Dark Mode / ‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°</span><span id="dark-icon">üåô</span>
        </div>
        <div class="menu-item" onclick="shareApp()" style="background: #e8f5e9;">
            <span id="share-label">Share App / ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç</span><span>üì¢</span>
        </div>
        <div style="margin-top: auto; font-size: 0.7rem; color: #888; text-align: center;">File_name 2.4 | Developed by AJ</div>
    </div>

    <div class="calendar-container">
        <div class="top-banner">
            <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
            <div class="om-symbol">‡•§‡•§ ‡§ú‡§Ø ‡§ó‡•Å‡§∞‡•Å‡§¶‡•á‡§µ ‡•§‡•§</div>
            <div class="guru-title">JAI GURUDEV</div>
            <div id="sub-title" style="font-size: 0.75rem; color: #555; font-weight: 600;">‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§¶‡•Ä‡§µ‡§æ‡§∞ ‡§ï‡•à‡§≤‡•á‡§Ç‡§°‡§∞ 2026</div>
        </div>

        <div class="month-header">
            <div class="month-nav-row">
                <button class="nav-btn" onclick="changeMonth(-1)">&#10094;</button>
                <div class="month-title">
                    <h2 id="month-display">JANUARY 2026</h2>
                    <span id="hindi-month-display">‡§™‡•å‡§∑ - ‡§Æ‡§æ‡§ò</span>
                </div>
                <button class="nav-btn" onclick="changeMonth(1)">&#10095;</button>
            </div>
            <div class="header-sub-details">
                <span id="vikram-samvat">‡§µ‡§ø‡§ï‡•ç‡§∞‡§Æ ‡§∏‡§Ç‡§µ‡§§ 2082</span>
                <span id="loc-display">BHUBANESWAR, ODISHA</span>
                <span id="saka-era">‡§∂‡§æ‡§ï‡•á 1947</span>
            </div>
        </div>

        <div class="weekdays" id="weekdays-container">
            <div class="weekday sunday">‡§∞‡§µ‡§ø<br><small>SUN</small></div>
            <div class="weekday">‡§∏‡•ã‡§Æ<br><small>MON</small></div>
            <div class="weekday">‡§Æ‡§Ç‡§ó‡§≤<br><small>TUE</small></div>
            <div class="weekday">‡§¨‡•Å‡§ß<br><small>WED</small></div>
            <div class="weekday">‡§ó‡•Å‡§∞‡•Å<br><small>THU</small></div>
            <div class="weekday">‡§∂‡•Å‡§ï‡•ç‡§∞<br><small>FRI</small></div>
            <div class="weekday">‡§∂‡§®‡§ø<br><small>SAT</small></div>
        </div>

        <div class="days-grid" id="calendar-grid"></div>

        <div class="footer-section">
            <div class="mini-cal" id="prev-mini-cal"></div>
            <div class="notes-area">
                <div class="notes-header">‡§µ‡§ø‡§∂‡•á‡§∑ ‡§ü‡§ø‡§™‡•ç‡§™‡§£‡•Ä / ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ</div>
                <div class="note-line"></div><div class="note-line"></div><div class="note-line"></div>
            </div>
            <div class="mini-cal" id="next-mini-cal"></div>
        </div>
    </div>

    <div id="customModal" class="modal">
        <div class="modal-content">
            <div class="modal-header" id="modalTitle">‡§∏‡•Ç‡§ö‡§®‡§æ</div>
            <div class="modal-body" id="modalBody"></div>
            <button class="modal-btn" onclick="closeModal()">OK</button>
        </div>
    </div>

<script>
    const todayDate = new Date();
    let currentYear = todayDate.getFullYear();
    let currentMonth = todayDate.getMonth(); 
    let currentLang = 'hi';

    const monthNames = ["JANUARY", "FEBRUARY", "MARCH", "APRIL", "MAY", "JUNE", "JULY", "AUGUST", "SEPTEMBER", "OCTOBER", "NOVEMBER", "DECEMBER"];
    const hindiMonths = ["‡§™‡•å‡§∑ - ‡§Æ‡§æ‡§ò", "‡§Æ‡§æ‡§ò - ‡§´‡§æ‡§≤‡•ç‡§ó‡•Å‡§®", "‡§´‡§æ‡§≤‡•ç‡§ó‡•Å‡§® - ‡§ö‡•à‡§§‡•ç‡§∞", "‡§ö‡•à‡§§‡•ç‡§∞ - ‡§µ‡•à‡§∂‡§æ‡§ñ", "‡§µ‡•à‡§∂‡§æ‡§ñ - ‡§ú‡•ç‡§Ø‡•á‡§∑‡•ç‡§†", "‡§ú‡•ç‡§Ø‡•á‡§∑‡•ç‡§† - ‡§Ü‡§∑‡§æ‡§¢‡§º", "‡§Ü‡§∑‡§æ‡§¢‡§º - ‡§∂‡•ç‡§∞‡§æ‡§µ‡§£", "‡§∂‡•ç‡§∞‡§æ‡§µ‡§£ - ‡§≠‡§æ‡§¶‡•ç‡§∞‡§™‡§¶", "‡§≠‡§æ‡§¶‡•ç‡§∞‡§™‡§¶ - ‡§Ü‡§∂‡•ç‡§µ‡§ø‡§®", "‡§Ü‡§∂‡•ç‡§µ‡§ø‡§® - ‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§ï", "‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§ï - ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§∂‡•Ä‡§∞‡•ç‡§∑", "‡§Æ‡§æ‡§∞‡•ç‡§ó‡§∂‡•Ä‡§∞‡•ç‡§∑ - ‡§™‡•å‡§∑"];
    
    const langData = {
        hi: { weekdays: ["‡§∞‡§µ‡§ø", "‡§∏‡•ã‡§Æ", "‡§Æ‡§Ç‡§ó‡§≤", "‡§¨‡•Å‡§ß", "‡§ó‡•Å‡§∞‡•Å", "‡§∂‡•Å‡§ï‡•ç‡§∞", "‡§∂‡§®‡§ø"], subTitle: "‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§¶‡•Ä‡§µ‡§æ‡§∞ ‡§ï‡•à‡§≤‡•á‡§Ç‡§°‡§∞ 2026", notes: "‡§µ‡§ø‡§∂‡•á‡§∑ ‡§ü‡§ø‡§™‡•ç‡§™‡§£‡•Ä / ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ", install: "‡§π‡•ã‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§™‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç", loc: "‡§≠‡•Å‡§µ‡§®‡•á‡§∂‡•ç‡§µ‡§∞, ‡§ì‡§°‡§ø‡§∂‡§æ", dark: "‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°", light: "‡§≤‡§æ‡§á‡§ü ‡§Æ‡•ã‡§°" },
        en: { weekdays: ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"], subTitle: "Spiritual Wall Calendar 2026", notes: "Notes / Events", install: "Add to Home Screen", loc: "BHUBANESWAR, ODISHA", dark: "Dark Mode", light: "Light Mode" }
    };

    const holidays2026 = { "0-14": "‡§Æ‡§ï‡§∞ ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§æ‡§Ç‡§§‡§ø", "0-26": "‡§ó‡§£‡§§‡§Ç‡§§‡•ç‡§∞ ‡§¶‡§ø‡§µ‡§∏", "1-15": "‡§Æ‡§π‡§æ‡§∂‡§ø‡§µ‡§∞‡§æ‡§§‡•ç‡§∞‡§ø", "2-4": "‡§π‡•ã‡§≤‡•Ä", "2-19": "‡§ó‡•Å‡§°‡§º‡•Ä ‡§™‡§°‡§º‡§µ‡§æ", "2-26": "‡§∞‡§æ‡§Æ ‡§®‡§µ‡§Æ‡•Ä", "3-14": "‡§Ö‡§Æ‡•ç‡§¨‡•á‡§°‡§ï‡§∞ ‡§ú‡§Ø‡§Ç‡§§‡•Ä", "3-19": "‡§Ö‡§ï‡•ç‡§∑‡§Ø ‡§§‡•É‡§§‡•Ä‡§Ø‡§æ", "7-15": "‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞‡§§‡§æ ‡§¶‡§ø‡§µ‡§∏", "7-28": "‡§∞‡§ï‡•ç‡§∑‡§æ‡§¨‡§Ç‡§ß‡§®", "8-4": "‡§ú‡§®‡•ç‡§Æ‡§æ‡§∑‡•ç‡§ü‡§Æ‡•Ä", "9-2": "‡§ó‡§æ‡§Ç‡§ß‡•Ä ‡§ú‡§Ø‡§Ç‡§§‡•Ä", "9-20": "‡§µ‡§ø‡§ú‡§Ø‡§¶‡§∂‡§Æ‡•Ä", "10-8": "‡§¶‡•Ä‡§™‡§æ‡§µ‡§≤‡•Ä", "10-9": "‡§ó‡•ã‡§µ‡§∞‡•ç‡§ß‡§® ‡§™‡•Ç‡§ú‡§æ", "11-25": "‡§ï‡•ç‡§∞‡§ø‡§∏‡§Æ‡§∏" };

    function getTithi2026(date) {
        const refDate = new Date(2026, 0, 3); // 3 Jan 2026 is Purnima
        let diffDays = (date - refDate) / (1000 * 60 * 60 * 24);
        
        // Accurate lunar phase with slight monthly adjustment for 2026 anomalies
        const offsets = [0, 0.1, 0.2, 0.25, 0.3, 0.4, 0.45, 0.5, 0.6, 0.7, 0.8, 0.9];
        let currentMonthIdx = date.getMonth();
        let cyclePos = ((diffDays - offsets[currentMonthIdx]) % 29.53059);
        if (cyclePos < 0) cyclePos += 29.53059;

        const tithis = ["‡§Ö‡§Æ‡§æ‡§µ‡§∏‡•ç‡§Ø‡§æ", "‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§¶‡§æ", "‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø‡§æ", "‡§§‡•É‡§§‡•Ä‡§Ø‡§æ", "‡§ö‡§§‡•Å‡§∞‡•ç‡§•‡•Ä", "‡§™‡§Ç‡§ö‡§Æ‡•Ä", "‡§∑‡§∑‡•ç‡§†‡•Ä", "‡§∏‡§™‡•ç‡§§‡§Æ‡•Ä", "‡§Ö‡§∑‡•ç‡§ü‡§Æ‡•Ä", "‡§®‡§µ‡§Æ‡•Ä", "‡§¶‡§∂‡§Æ‡•Ä", "‡§è‡§ï‡§æ‡§¶‡§∂‡•Ä", "‡§¶‡•ç‡§µ‡§æ‡§¶‡§∂‡•Ä", "‡§§‡•ç‡§∞‡§Ø‡•ã‡§¶‡§∂‡•Ä", "‡§ö‡§§‡•Å‡§∞‡•ç‡§¶‡§∂‡•Ä", "‡§™‡•Ç‡§∞‡•ç‡§£‡§ø‡§Æ‡§æ"];
        
        // Precision logic for Tithi detection
        if (cyclePos < 0.6 || cyclePos > 28.9) return { name: "‡§™‡•Ç‡§∞‡•ç‡§£‡§ø‡§Æ‡§æ", paksha: "‡§∂‡•Å‡§ï‡•ç‡§≤" };
        if (cyclePos >= 14.4 && cyclePos <= 15.6) return { name: "‡§Ö‡§Æ‡§æ‡§µ‡§∏‡•ç‡§Ø‡§æ", paksha: "‡§ï‡•É‡§∑‡•ç‡§£" };
        
        if (cyclePos < 14.4) {
            let idx = Math.ceil(cyclePos);
            return { name: tithis[idx] || "‡§§‡•É‡§§‡•Ä‡§Ø‡§æ", paksha: "‡§ï‡•É‡§∑‡•ç‡§£" };
        } else {
            let idx = Math.ceil(cyclePos - 15.1);
            return { name: tithis[idx] || "‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø‡§æ", paksha: "‡§∂‡•Å‡§ï‡•ç‡§≤" };
        }
    }

    function renderCalendar() {
        const grid = document.getElementById('calendar-grid');
        grid.innerHTML = "";
        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

        document.getElementById('month-display').innerText = `${monthNames[currentMonth]} ${currentYear}`;
        document.getElementById('hindi-month-display').innerText = hindiMonths[currentMonth];
        
        // Dynamic Samvat and Saka Era Calculation by AJ
        let vSamvat = (currentMonth < 2) ? currentYear + 56 : currentYear + 57;
        let sEra = (currentMonth < 3) ? currentYear - 79 : currentYear - 78;
        
        document.getElementById('vikram-samvat').innerText = `‡§µ‡§ø‡§ï‡•ç‡§∞‡§Æ ‡§∏‡§Ç‡§µ‡§§ ${vSamvat}`;
        document.getElementById('saka-era').innerText = `‡§∂‡§æ‡§ï‡•á ${sEra}`;

        for(let i=0; i<firstDay; i++) { grid.appendChild(Object.assign(document.createElement('div'), {className: 'day-cell empty'})); }

        const today = new Date();
        for(let d=1; d<=daysInMonth; d++) {
            const dateObj = new Date(currentYear, currentMonth, d);
            const tithi = getTithi2026(dateObj);
            const cell = document.createElement('div');
            cell.className = 'day-cell';
            if(dateObj.getDay() === 0) cell.classList.add('sunday');
            if(d===today.getDate() && currentMonth===today.getMonth() && currentYear===today.getFullYear()) cell.classList.add('today');

            let holiday = holidays2026[`${currentMonth}-${d}`] || "";
            
            cell.innerHTML = `
                <div class="paksha-mark">${tithi.paksha.charAt(0)}</div>
                <div class="en-date">${d}</div>
                <div>
                    ${holiday ? `<div class="festival-text">${holiday}</div>` : ''}
                    <div class="tithi" style="${tithi.name === '‡§è‡§ï‡§æ‡§¶‡§∂‡•Ä' ? 'color: var(--primary-red); font-weight: 800; border-top: 1px solid #ffcdd2;' : ''}">${tithi.name}</div>
                </div>
            `;
            
            // Pass holiday to details view
            cell.onclick = () => showDayDetails(d, tithi, holiday, dateObj);
            
            grid.appendChild(cell);
        }
        renderMiniCal(currentMonth - 1, 'prev-mini-cal');
        renderMiniCal(currentMonth + 1, 'next-mini-cal');
    }

    function renderMiniCal(mIdx, id) {
        let y = currentYear, m = mIdx;
        if(m < 0) { m = 11; y--; } else if(m > 11) { m = 0; y++; }
        const fDay = new Date(y, m, 1).getDay(), lDay = new Date(y, m + 1, 0).getDate();
        let html = `<span style="font-weight:bold;color:var(--primary-red);text-align:center;display:block;">${monthNames[m].substring(0,3)}</span><table><tr>`;
        ['S','M','T','W','T','F','S'].forEach(d => html += `<th>${d}</th>`);
        html += `</tr><tr>`;
        for(let i=0; i<fDay; i++) html += `<td></td>`;
        for(let d=1; d<=lDay; d++) { html += `<td>${d}</td>`; if((fDay+d)%7===0) html += `</tr><tr>`; }
        document.getElementById(id).innerHTML = html + `</tr></table>`;
    }

    function changeMonth(s) {
        const grid = document.getElementById('calendar-grid');
        grid.classList.add('fade-out'); // ‡§è‡§®‡•Ä‡§Æ‡•á‡§∂‡§® ‡§∂‡•Å‡§∞‡•Ç
        
        setTimeout(() => {
            currentMonth += s;
            if(currentMonth > 11) { currentMonth = 0; currentYear++; }
            else if(currentMonth < 0) { currentMonth = 11; currentYear--; }
            
            renderCalendar();
            grid.classList.remove('fade-out');
            grid.classList.add('slide-in');
            
            setTimeout(() => grid.classList.remove('slide-in'), 300);
        }, 200);
    }

    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const isDark = document.body.classList.contains('dark-mode');
        document.getElementById('dark-icon').innerText = isDark ? '‚òÄÔ∏è' : 'üåô';
        document.getElementById('dark-label').innerText = isDark ? langData[currentLang].light : langData[currentLang].dark;
        // toggleMenu(); // ‡§Ö‡§ó‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§Æ‡•á‡§®‡•Ç ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã ‡§§‡•ã ‡§á‡§∏‡•á ‡§ñ‡•ã‡§≤ ‡§¶‡•á‡§Ç
    }

    function toggleMenu() { const p = document.getElementById('sidePanel'), o = document.getElementById('overlay'); p.classList.toggle('open'); o.style.display = p.classList.contains('open') ? 'block' : 'none'; }
    
    function setLanguage(l) {
        currentLang = l;
        document.getElementById('btn-hi').classList.toggle('active', l==='hi');
        document.getElementById('btn-en').classList.toggle('active', l==='en');
        document.getElementById('sub-title').innerText = langData[l].subTitle;
        document.querySelector('.notes-header').innerText = langData[l].notes;
        document.getElementById('loc-display').innerText = langData[l].loc;
        const divs = document.querySelectorAll('.weekday');
        langData[l].weekdays.forEach((d, i) => divs[i].innerHTML = l==='hi' ? `${d}<br><small>${langData.en.weekdays[i]}</small>` : d);
        toggleMenu(); renderCalendar();
    }

    function showModal(t, b) { document.getElementById('modalTitle').innerText = t; document.getElementById('modalBody').innerHTML = b; document.getElementById('customModal').style.display = 'flex'; }
    function closeModal() { document.getElementById('customModal').style.display = 'none'; }

    function showDayDetails(day, tithi, fest, date) {
        const weekdaysFull = ["Sunday / ‡§∞‡§µ‡§ø‡§µ‡§æ‡§∞", "Monday / ‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞", "Tuesday / ‡§Æ‡§Ç‡§ó‡§≤‡§µ‡§æ‡§∞", "Wednesday / ‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞", "Thursday / ‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞", "Friday / ‡§∂‡•Å‡§ï‡•ç‡§∞‡§µ‡§æ‡§∞", "Saturday / ‡§∂‡§®‡§ø‡§µ‡§æ‡§∞"];
        const title = currentLang === 'hi' ? "‡§¶‡§ø‡§® ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£" : "Day Details";
        
        let vSamvat = (currentMonth < 2) ? currentYear + 56 : currentYear + 57;
        let sEra = (currentMonth < 3) ? currentYear - 79 : currentYear - 78;

        let body = `
            <div class="detail-row"><span class="detail-label">Date:</span><span class="detail-value">${day} ${monthNames[currentMonth]} ${currentYear}</span></div>
            <div class="detail-row"><span class="detail-label">Day:</span><span class="detail-value">${weekdaysFull[date.getDay()]}</span></div>
            <div class="detail-row"><span class="detail-label">Tithi:</span><span class="detail-value">${tithi.name} (${tithi.paksha} ‡§™‡§ï‡•ç‡§∑)</span></div>
            <div class="detail-row"><span class="detail-label">Vikram Samvat:</span><span class="detail-value">${vSamvat}</span></div>
            <div class="detail-row"><span class="detail-label">Saka Era:</span><span class="detail-value">${sEra}</span></div>
            ${fest ? `<div class="detail-fest">üéä ${fest} üéä</div>` : ''}
        `;
        
        showModal(title, body);
    }

    function addBookmark() {
        const body = currentLang === 'hi' ? "1. ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§ï‡•á ‡§∏‡§¨‡§∏‡•á ‡§ä‡§™‡§∞ <b>'Three Dots' (‚ãÆ)</b> ‡§Ø‡§æ <b>'Setting'</b> ‡§¨‡§ü‡§® ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§<br><br>2. ‡§Ø‡§π‡§æ‡§Å <b>'Add to Home Screen'</b> ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ï‡•ã ‡§ö‡•Å‡§®‡•á‡§Ç‡•§" : "1. Click on <b>'Three Dots' (‚ãÆ)</b> or <b>'Setting'</b> at the top.<br><br>2. Select <b>'Add to Home Screen'</b>.";
        toggleMenu(); showModal(currentLang==='hi'?"‡§π‡•ã‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®":"Add Home", body);
    }

    function shareApp() {
        // ‡§≠‡§æ‡§à, ‡§®‡•Ä‡§ö‡•á ‡§µ‡§æ‡§≤‡•á ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•ã ‡§Ü‡§™ ‡§Ö‡§™‡§®‡•Ä ‡§Ö‡§∏‡§≤‡•Ä ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ï‡•á ‡§≤‡§ø‡§Ç‡§ï ‡§∏‡•á ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç
        const siteLink = "https://hindi-calendar.vercel.app/"; 
        const text = `*Hindi Calendar 2026*\n‡§ú‡§Ø ‡§ó‡•Å‡§∞‡•Å‡§¶‡•á‡§µ! 2026 ‡§ï‡§æ ‡§Ö‡§∏‡§≤‡•Ä ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó ‡§î‡§∞ ‡§§‡•ç‡§Ø‡•å‡§π‡§æ‡§∞ ‡§Ø‡§π‡§æ‡§Å ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§ ‡§á‡§∏‡•á ‡§Ö‡§™‡§®‡•á ‡§´‡•ã‡§® ‡§™‡§∞ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§∏ ‡§≤‡§ø‡§Ç‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç:\n\n${siteLink}`;
        
        const waUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(text)}`;
        window.open(waUrl, '_blank');
        toggleMenu();
    }

    renderCalendar();
</script>
</body>
</html>